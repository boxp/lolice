{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "kubernetes": { "fileMatch": ["\\.yaml$"] },
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "image:\\s*docker\\.io/cloudflare/cloudflared:(?<version>[\\w.-]+)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.io/cloudflare/cloudflared",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "value:\\s*docker.all-hands.dev/all-hands-ai/runtime:(?<version>[\\w.-]+(?:-nikolaik)?)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/runtime",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "image:\\s*docker.all-hands.dev/all-hands-ai/([^:\\s]+):(?<version>[\\w.-]+(?:-[\\w]+)?)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/$1",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "value:\\s*docker.all-hands.dev/all-hands-ai/([^:\\s]+):(?<version>[\\w.-]+(?:-[\\w]+)?)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/$1",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    }
  ],
  "major": { "automerge": false },
  "automerge": true,
  "platformAutomerge": true
}
