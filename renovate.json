{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:recommended"],
  "kubernetes": { "fileMatch": ["\\.yaml$"] },
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "image:\\s*docker\\.io/cloudflare/cloudflared:(?<version>[\\w.-]+)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.io/cloudflare/cloudflared",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "description": "OpenHands container image",
      "customType": "regex",
      "fileMatch": ["argoproj/openhands/.*\\.yaml$"],
      "matchStrings": [
        "image:\\s*docker\\.all-hands\\.dev/all-hands-ai/openhands:(?<version>[\\w.-]+)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/openhands",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "description": "OpenHands runtime container image in environment variable",
      "customType": "regex",
      "fileMatch": ["argoproj/openhands/.*\\.yaml$"],
      "matchStrings": [
        "value:\\s*docker\\.all-hands\\.dev/all-hands-ai/runtime:(?<version>[\\w.-]+(?:-nikolaik)?)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/runtime",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "description": "General docker.all-hands.dev images in image: field",
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "image:\\s*docker.all-hands.dev/all-hands-ai/([^:\\s]+):(?<version>[\\w.-]+(?:-[\\w]+)?)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/$1",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "description": "General docker.all-hands.dev images in value: field",
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "value:\\s*docker\\.all-hands\\.dev/all-hands-ai/([^:\\s]+):(?<version>[\\w.-]+(?:-[\\w]+)?)"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/$1",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    },
    {
      "description": "Specific runtime image with nikolaik tag",
      "customType": "regex",
      "fileMatch": ["\\.yaml$"],
      "matchStrings": [
        "value:\\s*docker\\.all-hands\\.dev/all-hands-ai/runtime:(?<version>[\\d.]+)-nikolaik"
      ],
      "datasourceTemplate": "docker",
      "depNameTemplate": "docker.all-hands.dev/all-hands-ai/runtime",
      "versioningTemplate": "docker",
      "currentValueTemplate": "{{currentValue}}"
    }
  ],
  "major": { "automerge": false },
  "automerge": true,
  "platformAutomerge": true
}
