# Kubernetes Manifest Validation GitHub Action 設計ドキュメント

## 概要
本GitHub Actionは、リポジトリ内のKubernetesマニフェストファイルの検証を自動で実施するために開発される。対象となるファイルは、主に `manifests` ディレクトリ内の `*.yaml` および `*.yml` ファイルである。

## トリガー
- プルリクエスト作成時、およびpushイベント時に実行される
- CIパイプラインの一部として動作する

## 主な処理手順
1. リポジトリのチェックアウト
2. `manifests` ディレクトリの存在確認
   - ディレクトリが存在しない場合、警告を出して検証をスキップ
3. kubeval のインストール
   - 最新リリースのバイナリをダウンロードし、実行権限を付与
4. `kubeval` を用いて、マニフェストファイルの厳密検証を実施
   - `--strict` オプションを付与して検証を行う

## 失敗時の挙動
- 検証に失敗した場合、GitHub Actionのステータスが失敗となり、プルリクエスト上でフィードバックされる
- `manifests` ディレクトリが存在しない場合は、警告とともに検証をスキップ

## 補足
- kubevalのバージョンは、最新のリリースを使用する方針。ただし、必要に応じて固定バージョンへの変更が検討される
