# Longhornフェイルオーバー改善設定
# ノード障害時の自動フェイルオーバーを改善するための設定
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: node-down-pod-deletion-policy
  namespace: longhorn-system
value: "delete-both-statefulset-and-deployment-pod"
---
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: auto-delete-pod-when-volume-detached-unexpectedly
  namespace: longhorn-system
value: "true"
---
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: detach-manually-attached-volumes-when-cordoned
  namespace: longhorn-system
value: "true"
---
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: replica-soft-anti-affinity
  namespace: longhorn-system
value: "true"
---
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: replica-auto-balance
  namespace: longhorn-system
value: "least-effort"
---
# Orphan PVC自動削除設定
# 孤立したリソースを自動的に削除
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: orphan-resource-auto-deletion
  namespace: longhorn-system
value: "true"
---
apiVersion: longhorn.io/v1beta2
kind: Setting
metadata:
  name: orphan-resource-auto-deletion-grace-period
  namespace: longhorn-system
value: "86400"  # 24時間（秒単位）
