apiVersion: v1
kind: ConfigMap
metadata:
  name: openclaw-config
  namespace: openclaw
data:
  openclaw.json: |
    {
      "models": {
        "providers": {
          "litellm": {
            "baseUrl": "http://litellm.openclaw.svc.cluster.local:4000",
            "apiKey": "${LITELLM_PROXY_KEY}",
            "api": "openai-completions",
            "models": [
              {
                "id": "anthropic/claude-sonnet-4-5-20250929",
                "name": "Claude Sonnet 4.5",
                "reasoning": true,
                "input": ["text", "image"],
                "contextWindow": 200000,
                "maxTokens": 16384
              },
              {
                "id": "anthropic/claude-opus-4-6",
                "name": "Claude Opus 4.6",
                "reasoning": true,
                "input": ["text", "image"],
                "contextWindow": 200000,
                "maxTokens": 32000
              },
              {
                "id": "zai/glm-4.7",
                "name": "GLM-4.7",
                "reasoning": true,
                "input": ["text"],
                "contextWindow": 200000,
                "maxTokens": 4096
              },
              {
                "id": "zai/glm-4.5-flash",
                "name": "GLM-4.5 Flash",
                "reasoning": false,
                "input": ["text"],
                "contextWindow": 128000,
                "maxTokens": 4096
              }
            ]
          }
        }
      },
      "agents": {
        "defaults": {
          "model": {
            "primary": "litellm/anthropic/claude-sonnet-4-5-20250929",
            "fallbacks": ["litellm/anthropic/claude-opus-4-6"]
          },
          "models": {
            "litellm/anthropic/claude-sonnet-4-5-20250929": {
              "alias": "sonnet"
            },
            "litellm/anthropic/claude-opus-4-6": {
              "alias": "opus"
            },
            "litellm/zai/glm-4.7": {
              "alias": "glm47"
            },
            "litellm/zai/glm-4.5-flash": {
              "alias": "glm4-flash"
            }
          },
          "heartbeat": {
            "every": "30m",
            "target": "discord"
          },
          "sandbox": {
            "mode": "off"
          }
        }
      },
      "plugins": {
        "entries": {
          "discord": {
            "enabled": true
          }
        }
      },
      "channels": {
        "discord": {
          "enabled": true,
          "token": "${DISCORD_BOT_TOKEN}",
          "dm": {
            "enabled": true,
            "policy": "allowlist",
            "allowFrom": ["346180680851652618"]
          }
        }
      },
      "gateway": {
        "mode": "local",
        "bind": "lan",
        "port": 18789,
        "auth": {
          "token": "${OPENCLAW_GATEWAY_TOKEN}"
        },
        "controlUi": {
          "allowInsecureAuth": true
        }
      }
    }
